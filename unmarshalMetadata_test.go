package main

import (
	"encoding/base64"
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestUnmarshalMetadata(t *testing.T) {

	tests := []struct {
		name               string
		metadataBase64     string
		expectInvalidChars bool
	}{
		{
			"Should unmarshal metadata with VALID UTF8 characters",
			validUTF8Metadata,
			false,
		}, {
			"Should unmarshal metadata with INVALID UTF8 characters",
			invalidUTF8Metadata,
			true,
		},
	}

	for _, test := range tests {
		metadataXML, _ := base64.StdEncoding.DecodeString(test.metadataBase64)
		_, err, hadInvalidChars := unmarshalMetadata(metadataXML)
		assert.Nil(t, err, fmt.Sprintf("%s: Was not expecting error, but got [%v].", test.name, err))
		assert.Equal(t, test.expectInvalidChars, hadInvalidChars,
			fmt.Sprintf("%s: Expected [%v] for expectInvalidChars, but got [%v].", test.name, test.expectInvalidChars, hadInvalidChars))
	}
}

var validUTF8Metadata = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxuczExOmNvbnRlbnRSZWYgeG1sbnM6bnMxPSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV9iYXNlX3YxLjAueHNkIiB4bWxuczpuczI9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3BhcnR5X3YxLjAueHNkIiB4bWxuczpuczM9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX2xpZmVjeWNsZV92MS4wLnhzZCIgeG1sbnM6bnM0PSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV9wcm9wZXJ0eV92MS4wLnhzZCIgeG1sbnM6bnM1PSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV90YXhvbm9teV92MS4wLnhzZCIgeG1sbnM6bnM2PSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV90ZXJtX3YxLjAueHNkIiB4bWxuczpuczc9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3NlYXJjaF92MS4wLnhzZCIgeG1sbnM6bnM4PSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV9iaW5kaW5nX3YxLjAueHNkIiB4bWxuczpuczk9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3RhZ192MS4wLnhzZCIgeG1sbnM6bnMxMD0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfc3VnZ2VzdGlvbl92MS4wLnhzZCIgeG1sbnM6bnMxMT0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfY29udGVudF9yZWZlcmVuY2VfdjEuMC54c2QiIHhtbG5zOm5zMTI9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX25vdGlmaWNhdGlvbl92MS4wLnhzZCIgeG1sbnM6bnMxMz0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfY291bnRfcmVzcG9uc2VfdjEuMC54c2QiIHhtbG5zOm5zMTQ9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX2NvbmNlcHRfdjEuMC54c2QiIG5zMTE6aWQ9IjI4MzMyNjUiIG5zMTE6Y3JlYXRlZD0iMjAxNi0wMy0yOFQwNzoyMToyOS4wMDBaIj48bnMxMTpwcmltYXJ5U2VjdGlvbiBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjdlMTUzNzMyLTVjZWQtNDA3OS1iNzg1LWFjZmQwNmIxNDFhNiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9Ik4yVXhOVE0zTXpJdE5XTmxaQzAwTURjNUxXSTNPRFV0WVdObVpEQTJZakUwTVdFMi1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5BbWVyaWNhbiBJbnNpZ2h0PC9uczY6Y2Fub25pY2FsTmFtZT48L25zMTE6cHJpbWFyeVNlY3Rpb24+PG5zMTE6cHJpbWFyeVRoZW1lIG5zNjp0YXhvbm9teT0iR0wiIG5zNjpleHRlcm5hbFRlcm1JZD0iTnN0ZWluX0dMX1VTIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iVG5OMFpXbHVYMGRNWDFWVC1SMHc9Ij48bnM2OmNhbm9uaWNhbE5hbWU+VW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMTE6cHJpbWFyeVRoZW1lPjxuczExOnRhZ3M+PG5zOTp0YWc+PG5zOTptZXRhIG5zMTpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zOTp0ZXJtIG5zNjp0YXhvbm9teT0iU3ViamVjdHMiIG5zNjpleHRlcm5hbFRlcm1JZD0iNjMiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJOak09LVUzVmlhbVZqZEhNPSI+PG5zNjpjYW5vbmljYWxOYW1lPkVjb25vbWljIE5ld3M8L25zNjpjYW5vbmljYWxOYW1lPjwvbnM5OnRlcm0+PG5zOTpzY29yZSBuczk6Y29uZmlkZW5jZT0iMTAwIiBuczk6cmVsZXZhbmNlPSIxMDAiLz48L25zOTp0YWc+PG5zOTp0YWc+PG5zOTptZXRhIG5zMTpwcm92ZW5hbmNlPSJQT1NUUFJPQ0VTU09SIi8+PG5zOTp0ZXJtIG5zNjp0YXhvbm9teT0iR2VucmVzIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjciIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJOdz09LVIyVnVjbVZ6Ij48bnM2OmNhbm9uaWNhbE5hbWU+TmV3czwvbnM2OmNhbm9uaWNhbE5hbWU+PC9uczk6dGVybT48bnM5OnNjb3JlIG5zOTpjb25maWRlbmNlPSIxMDAiIG5zOTpyZWxldmFuY2U9IjEwMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJTZWN0aW9ucyIgbnM2OmV4dGVybmFsVGVybUlkPSI4IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iT0E9PS1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5VSyBQb2xpdGljcyAmYW1wOyBQb2xpY3k8L25zNjpjYW5vbmljYWxOYW1lPjwvbnM5OnRlcm0+PG5zOTpzY29yZSBuczk6Y29uZmlkZW5jZT0iODUiIG5zOTpyZWxldmFuY2U9Ijg1IiBuczk6ZnJlcXVlbmN5PSIwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjciIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJOdz09LVUyVmpkR2x2Ym5NPSI+PG5zNjpjYW5vbmljYWxOYW1lPlVLIEJ1c2luZXNzICZhbXA7IEVjb25vbXk8L25zNjpjYW5vbmljYWxOYW1lPjwvbnM5OnRlcm0+PG5zOTpzY29yZSBuczk6Y29uZmlkZW5jZT0iODUiIG5zOTpyZWxldmFuY2U9Ijg1IiBuczk6ZnJlcXVlbmN5PSIwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjYiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJOZz09LVUyVmpkR2x2Ym5NPSI+PG5zNjpjYW5vbmljYWxOYW1lPlVLPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9Ijg1IiBuczk6cmVsZXZhbmNlPSI4NSIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJTdWJqZWN0cyIgbnM2OmV4dGVybmFsVGVybUlkPSI2OCIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9Ik5qZz0tVTNWaWFtVmpkSE09Ij48bnM2OmNhbm9uaWNhbE5hbWU+Q3VycmVudCBBY2NvdW50PC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjEwNiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9Ik1UQTItVTJWamRHbHZibk09Ij48bnM2OmNhbm9uaWNhbE5hbWU+RW1lcmdpbmcgTWFya2V0czwvbnM2OmNhbm9uaWNhbE5hbWU+PC9uczk6dGVybT48bnM5OnNjb3JlIG5zOTpjb25maWRlbmNlPSI4NSIgbnM5OnJlbGV2YW5jZT0iODUiIG5zOTpmcmVxdWVuY3k9IjAiLz48L25zOTp0YWc+PG5zOTp0YWc+PG5zOTptZXRhIG5zMTpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zOTp0ZXJtIG5zNjp0YXhvbm9teT0iR0wiIG5zNjpleHRlcm5hbFRlcm1JZD0iTnN0ZWluX0dMX1VTIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iVG5OMFpXbHVYMGRNWDFWVC1SMHc9Ij48bnM2OmNhbm9uaWNhbE5hbWU+VW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjkxIiBuczk6cmVsZXZhbmNlPSI4NiIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJTdWJqZWN0cyIgbnM2OmV4dGVybmFsVGVybUlkPSI3MiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9Ik56ST0tVTNWaWFtVmpkSE09Ij48bnM2OmNhbm9uaWNhbE5hbWU+SW5kdXN0cmlhbCBQcm9kdWN0aW9uPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IkdMIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9Ik5zdGVpbl9HTF9TWSIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9IlRuTjBaV2x1WDBkTVgxTlotUjB3PSI+PG5zNjpjYW5vbmljYWxOYW1lPlN5cmlhPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9Ijg3IiBuczk6cmVsZXZhbmNlPSI4NiIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlBSRVBST0NFU1NPUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9Ik1lZGlhVHlwZXMiIG5zNjpleHRlcm5hbFRlcm1JZD0iZjMwY2E2NjctMDA1Ni00ZTk4LWI0MWUtZjk5MTk2ZTMyNGVmIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iWmpNd1kyRTJOamN0TURBMU5pMDBaVGs0TFdJME1XVXRaams1TVRrMlpUTXlOR1ZtLVRXVmthV0ZVZVhCbGN3PT0iPjxuczY6Y2Fub25pY2FsTmFtZT5UZXh0PC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlBOIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9Ik5zdGVpbl9QTl9Qb2xpdGljaWFuXzQ0OTUiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJUbk4wWldsdVgxQk9YMUJ2YkdsMGFXTnBZVzVmTkRRNU5RPT0tVUU0PSI+PG5zNjpjYW5vbmljYWxOYW1lPkx1aXogSW7DoWNpbyBMdWxhIGRhIFNpbHZhPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlBOIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9Ik5zdGVpbl9QTl9Qb2xpdGljaWFuXzI3MSIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9IlRuTjBaV2x1WDFCT1gxQnZiR2wwYVdOcFlXNWZNamN4LVVFND0iPjxuczY6Y2Fub25pY2FsTmFtZT5EYXZpZCBDYW1lcm9uPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjgxIiBuczk6cmVsZXZhbmNlPSI2OSIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJUb3BpY3MiIG5zNjpleHRlcm5hbFRlcm1JZD0iMDAyZmM1ZmUtNDk1Ny00MzVkLWFlYjgtZDE4OGQyOGEzNDM5IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iTURBeVptTTFabVV0TkRrMU55MDBNelZrTFdGbFlqZ3RaREU0T0dReU9HRXpORE01LVZHOXdhV056Ij48bnM2OmNhbm9uaWNhbE5hbWU+QXJhYiBCYW5raW5nICZhbXA7IEZpbmFuY2U8L25zNjpjYW5vbmljYWxOYW1lPjwvbnM5OnRlcm0+PG5zOTpzY29yZSBuczk6Y29uZmlkZW5jZT0iMTAwIiBuczk6cmVsZXZhbmNlPSIxMDAiLz48L25zOTp0YWc+PG5zOTp0YWc+PG5zOTptZXRhIG5zMTpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zOTp0ZXJtIG5zNjp0YXhvbm9teT0iU2VjdGlvbnMiIG5zNjpleHRlcm5hbFRlcm1JZD0iN2UxNTM3MzItNWNlZC00MDc5LWI3ODUtYWNmZDA2YjE0MWE2IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iTjJVeE5UTTNNekl0TldObFpDMDBNRGM1TFdJM09EVXRZV05tWkRBMllqRTBNV0UyLVUyVmpkR2x2Ym5NPSI+PG5zNjpjYW5vbmljYWxOYW1lPkFtZXJpY2FuIEluc2lnaHQ8L25zNjpjYW5vbmljYWxOYW1lPjwvbnM5OnRlcm0+PG5zOTpzY29yZSBuczk6Y29uZmlkZW5jZT0iODUiIG5zOTpyZWxldmFuY2U9Ijg1IiBuczk6ZnJlcXVlbmN5PSIwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IkdMIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9Ik5zdGVpbl9HTF9HQiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9IlRuTjBaV2x1WDBkTVgwZEMtUjB3PSI+PG5zNjpjYW5vbmljYWxOYW1lPlVuaXRlZCBLaW5nZG9tPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjY1IiBuczk6cmVsZXZhbmNlPSI3NyIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJTZWN0aW9ucyIgbnM2OmV4dGVybmFsVGVybUlkPSIxNiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczE6aWQ9Ik1UWT0tVTJWamRHbHZibk09Ij48bnM2OmNhbm9uaWNhbE5hbWU+TWlkZGxlIEVhc3QgJmFtcDsgTm9ydGggQWZyaWNhPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9Ijg1IiBuczk6cmVsZXZhbmNlPSI4NSIgbnM5OmZyZXF1ZW5jeT0iMCIvPjwvbnM5OnRhZz48bnM5OnRhZz48bnM5Om1ldGEgbnMxOnByb3ZlbmFuY2U9IlVTRVIiLz48bnM5OnRlcm0gbnM2OnRheG9ub215PSJUb3BpY3MiIG5zNjpleHRlcm5hbFRlcm1JZD0iZDJhNTVjZmYtZjYxNi00NjgzLWFhMjItNTA2NGMyZGJhNjMwIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMTppZD0iWkRKaE5UVmpabVl0WmpZeE5pMDBOamd6TFdGaE1qSXROVEEyTkdNeVpHSmhOak13LVZHOXdhV056Ij48bnM2OmNhbm9uaWNhbE5hbWU+QXNpYSBNYW51ZmFjdHVyaW5nPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjxuczk6dGFnPjxuczk6bWV0YSBuczE6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczk6dGVybSBuczY6dGF4b25vbXk9IlRvcGljcyIgbnM2OmV4dGVybmFsVGVybUlkPSI5NDVlNzFiZi0zMjk0LTRkNWYtYWMyMC00NTQzNDAzMmQwYmMiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMxOmlkPSJPVFExWlRjeFltWXRNekk1TkMwMFpEVm1MV0ZqTWpBdE5EVTBNelF3TXpKa01HSmotVkc5d2FXTnoiPjxuczY6Y2Fub25pY2FsTmFtZT5Bc2lhIG1hcml0aW1lIHRlbnNpb25zPC9uczY6Y2Fub25pY2FsTmFtZT48L25zOTp0ZXJtPjxuczk6c2NvcmUgbnM5OmNvbmZpZGVuY2U9IjEwMCIgbnM5OnJlbGV2YW5jZT0iMTAwIi8+PC9uczk6dGFnPjwvbnMxMTp0YWdzPjxuczExOmV4dGVybmFsUmVmZXJlbmNlcz48bnM4OnJlZmVyZW5jZSBuczE6ZXh0ZXJuYWxTb3VyY2U9Ik1FVEhPREUiIG5zMTpleHRlcm5hbElkPSI4YmQwMTk0ZS1lNTAxLTExZTUtOWVmOC04ZGI3OGFlZmE1MWUiLz48L25zMTE6ZXh0ZXJuYWxSZWZlcmVuY2VzPjwvbnMxMTpjb250ZW50UmVmPg=="
var invalidUTF8Metadata = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxuczExOmNvbnRlbnRSZWYgeG1sbnM6bnMxPSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV9iaW5kaW5nX3YxLjAueHNkIiB4bWxuczpuczI9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3RhZ192MS4wLnhzZCIgeG1sbnM6bnMzPSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV9iYXNlX3YxLjAueHNkIiB4bWxuczpuczQ9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3BhcnR5X3YxLjAueHNkIiB4bWxuczpuczU9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX2xpZmVjeWNsZV92MS4wLnhzZCIgeG1sbnM6bnM2PSJodHRwOi8vbWV0YWRhdGEuaW50ZXJuYWwuZnQuY29tL21ldGFkYXRhL3hzZC9tZXRhZGF0YV90ZXJtX3YxLjAueHNkIiB4bWxuczpuczc9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3N1Z2dlc3Rpb25fdjEuMC54c2QiIHhtbG5zOm5zOD0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfcHJvcGVydHlfdjEuMC54c2QiIHhtbG5zOm5zOT0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfdGF4b25vbXlfdjEuMC54c2QiIHhtbG5zOm5zMTA9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX25vdGlmaWNhdGlvbl92MS4wLnhzZCIgeG1sbnM6bnMxMT0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfY29udGVudF9yZWZlcmVuY2VfdjEuMC54c2QiIHhtbG5zOm5zMTI9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX3NlYXJjaF92MS4wLnhzZCIgeG1sbnM6bnMxMz0iaHR0cDovL21ldGFkYXRhLmludGVybmFsLmZ0LmNvbS9tZXRhZGF0YS94c2QvbWV0YWRhdGFfY291bnRfcmVzcG9uc2VfdjEuMC54c2QiIHhtbG5zOm5zMTQ9Imh0dHA6Ly9tZXRhZGF0YS5pbnRlcm5hbC5mdC5jb20vbWV0YWRhdGEveHNkL21ldGFkYXRhX2NvbmNlcHRfdjEuMC54c2QiIG5zMTE6aWQ9IjMxNjY4MjgiIG5zMTE6Y3JlYXRlZD0iMjAxNi0wMy0xOFQxNzo0MzowNS4wMDBaIj48bnMxMTpwcmltYXJ5U2VjdGlvbiBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjI2IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iTWpZPS1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5BbWVyaWNhcyBQb2xpdGljcyAmYW1wOyBQb2xpY3k8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMxMTpwcmltYXJ5U2VjdGlvbj48bnMxMTpwcmltYXJ5VGhlbWUgbnM2OnRheG9ub215PSJHTCIgbnM2OmV4dGVybmFsVGVybUlkPSJOc3RlaW5fR0xfQlIiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJUbk4wWldsdVgwZE1YMEpTLVIwdz0iPjxuczY6Y2Fub25pY2FsTmFtZT5CcmF6aWw8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMxMTpwcmltYXJ5VGhlbWU+PG5zMTE6dGFncz48bnMyOnRhZz48bnMyOm1ldGEgbnMzOnByb3ZlbmFuY2U9IlVTRVIiLz48bnMyOnRlcm0gbnM2OnRheG9ub215PSJTZWN0aW9ucyIgbnM2OmV4dGVybmFsVGVybUlkPSIxIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iTVE9PS1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5Xb3JsZDwvbnM2OmNhbm9uaWNhbE5hbWU+PC9uczI6dGVybT48bnMyOnNjb3JlIG5zMjpjb25maWRlbmNlPSIxMDAiIG5zMjpyZWxldmFuY2U9IjEwMCIvPjwvbnMyOnRhZz48bnMyOnRhZz48bnMyOm1ldGEgbnMzOnByb3ZlbmFuY2U9IlBPU1RQUk9DRVNTT1IiLz48bnMyOnRlcm0gbnM2OnRheG9ub215PSJHZW5yZXMiIG5zNjpleHRlcm5hbFRlcm1JZD0iNyIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczM6aWQ9Ik53PT0tUjJWdWNtVnoiPjxuczY6Y2Fub25pY2FsTmFtZT5OZXdzPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjEwMCIgbnMyOnJlbGV2YW5jZT0iMTAwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IlBOIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjU0MTg4YWYzLTgyZjktNGYwMi04ODE1LWFlYTFmOGRkNmVjZSIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczM6aWQ9Ik5UUXhPRGhoWmpNdE9ESm1PUzAwWmpBeUxUZzRNVFV0WVdWaE1XWTRaR1EyWldObC1VRTQ9Ij48bnM2OmNhbm9uaWNhbE5hbWU+RWR1YXJkbyBDdW5oYTwvbnM2OmNhbm9uaWNhbE5hbWU+PC9uczI6dGVybT48bnMyOnNjb3JlIG5zMjpjb25maWRlbmNlPSI4NCIgbnMyOnJlbGV2YW5jZT0iNjgiIG5zMjpmcmVxdWVuY3k9IjAiLz48L25zMjp0YWc+PG5zMjp0YWc+PG5zMjptZXRhIG5zMzpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zMjp0ZXJtIG5zNjp0YXhvbm9teT0iQXV0aG9ycyIgbnM2OmV4dGVybmFsVGVybUlkPSJDQi0wMDAwNjUxIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iUTBJdE1EQXdNRFkxTVE9PS1RWFYwYUc5eWN3PT0iPjxuczY6Y2Fub25pY2FsTmFtZT5TYW1hbnRoYSBQZWFyc29uPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjYzIiBuczI6cmVsZXZhbmNlPSI4NiIgbnMyOmZyZXF1ZW5jeT0iMCIvPjwvbnMyOnRhZz48bnMyOnRhZz48bnMyOm1ldGEgbnMzOnByb3ZlbmFuY2U9IlVTRVIiLz48bnMyOnRlcm0gbnM2OnRheG9ub215PSJHTCIgbnM2OmV4dGVybmFsVGVybUlkPSJOc3RlaW5fR0xfQlIiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJUbk4wWldsdVgwZE1YMEpTLVIwdz0iPjxuczY6Y2Fub25pY2FsTmFtZT5CcmF6aWw8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMyOnRlcm0+PG5zMjpzY29yZSBuczI6Y29uZmlkZW5jZT0iNzUiIG5zMjpyZWxldmFuY2U9IjgzIiBuczI6ZnJlcXVlbmN5PSIwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IklQVEMiIG5zNjpleHRlcm5hbFRlcm1JZD0iMTEwMDMwMDAiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJNVEV3TURNd01EQT0tU1ZCVVF3PT0iPjxuczY6Y2Fub25pY2FsTmFtZT4xMTAwMzAwMCAtIGVsZWN0aW9uPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9Ijk1IiBuczI6cmVsZXZhbmNlPSI5NSIgbnMyOmZyZXF1ZW5jeT0iMCIvPjwvbnMyOnRhZz48bnMyOnRhZz48bnMyOm1ldGEgbnMzOnByb3ZlbmFuY2U9IlVTRVIiLz48bnMyOnRlcm0gbnM2OnRheG9ub215PSJQTiIgbnM2OmV4dGVybmFsVGVybUlkPSJhNTNhMzk4NC1mN2NhLTRlN2QtYmU4MC1lYTJjMWM0MDUxMDgiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJZVFV6WVRNNU9EUXRaamRqWVMwMFpUZGtMV0psT0RBdFpXRXlZekZqTkRBMU1UQTQtVUU0PSI+PG5zNjpjYW5vbmljYWxOYW1lPk5laWwgU2hlYXJpbmc8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMyOnRlcm0+PG5zMjpzY29yZSBuczI6Y29uZmlkZW5jZT0iODciIG5zMjpyZWxldmFuY2U9IjY2IiBuczI6ZnJlcXVlbmN5PSIwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjEwNiIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczM6aWQ9Ik1UQTItVTJWamRHbHZibk09Ij48bnM2OmNhbm9uaWNhbE5hbWU+RW1lcmdpbmcgTWFya2V0czwvbnM2OmNhbm9uaWNhbE5hbWU+PC9uczI6dGVybT48bnMyOnNjb3JlIG5zMjpjb25maWRlbmNlPSI4NSIgbnMyOnJlbGV2YW5jZT0iODUiIG5zMjpmcmVxdWVuY3k9IjAiLz48L25zMjp0YWc+PG5zMjp0YWc+PG5zMjptZXRhIG5zMzpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zMjp0ZXJtIG5zNjp0YXhvbm9teT0iUE4iIG5zNjpleHRlcm5hbFRlcm1JZD0iTnN0ZWluX1BOX1BvbGl0aWNpYW5zXzIwMDlfMTBfMl80MjM4MyIgbnM2OnN0YXR1cz0iQUNUSVZFIiBuczM6aWQ9IlRuTjBaV2x1WDFCT1gxQnZiR2wwYVdOcFlXNXpYekl3TURsZk1UQmZNbDgwTWpNNE13PT0tVUU0PSI+PG5zNjpjYW5vbmljYWxOYW1lPkRpbG1hIFJvdXNzZWZmPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjcwIiBuczI6cmVsZXZhbmNlPSI3NSIgbnMyOmZyZXF1ZW5jeT0iMCIvPjwvbnMyOnRhZz48bnMyOnRhZz48bnMyOm1ldGEgbnMzOnByb3ZlbmFuY2U9IlBSRVBST0NFU1NPUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9Ik1lZGlhVHlwZXMiIG5zNjpleHRlcm5hbFRlcm1JZD0iZjMwY2E2NjctMDA1Ni00ZTk4LWI0MWUtZjk5MTk2ZTMyNGVmIiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iWmpNd1kyRTJOamN0TURBMU5pMDBaVGs0TFdJME1XVXRaams1TVRrMlpUTXlOR1ZtLVRXVmthV0ZVZVhCbGN3PT0iPjxuczY6Y2Fub25pY2FsTmFtZT5UZXh0PC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjEwMCIgbnMyOnJlbGV2YW5jZT0iMTAwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IlBOIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9Ik5zdGVpbl9QTl9Qb2xpdGljaWFuXzQ0OTUiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJUbk4wWldsdVgxQk9YMUJ2YkdsMGFXTnBZVzVmTkRRNU5RPT0tVUU0PSI+PG5zNjpjYW5vbmljYWxOYW1lPkx1aXogSW7hY2lvIEx1bGEgZGEgU2lsdmE8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMyOnRlcm0+PG5zMjpzY29yZSBuczI6Y29uZmlkZW5jZT0iODciIG5zMjpyZWxldmFuY2U9IjgxIiBuczI6ZnJlcXVlbmN5PSIwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjI4IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iTWpnPS1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5BbWVyaWNhcyBTb2NpZXR5PC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjEwMCIgbnMyOnJlbGV2YW5jZT0iMTAwIi8+PC9uczI6dGFnPjxuczI6dGFnPjxuczI6bWV0YSBuczM6cHJvdmVuYW5jZT0iVVNFUiIvPjxuczI6dGVybSBuczY6dGF4b25vbXk9IlNlY3Rpb25zIiBuczY6ZXh0ZXJuYWxUZXJtSWQ9IjI2IiBuczY6c3RhdHVzPSJBQ1RJVkUiIG5zMzppZD0iTWpZPS1VMlZqZEdsdmJuTT0iPjxuczY6Y2Fub25pY2FsTmFtZT5BbWVyaWNhcyBQb2xpdGljcyAmYW1wOyBQb2xpY3k8L25zNjpjYW5vbmljYWxOYW1lPjwvbnMyOnRlcm0+PG5zMjpzY29yZSBuczI6Y29uZmlkZW5jZT0iMTAwIiBuczI6cmVsZXZhbmNlPSIxMDAiLz48L25zMjp0YWc+PG5zMjp0YWc+PG5zMjptZXRhIG5zMzpwcm92ZW5hbmNlPSJVU0VSIi8+PG5zMjp0ZXJtIG5zNjp0YXhvbm9teT0iU2VjdGlvbnMiIG5zNjpleHRlcm5hbFRlcm1JZD0iMjMiIG5zNjpzdGF0dXM9IkFDVElWRSIgbnMzOmlkPSJNak09LVUyVmpkR2x2Ym5NPSI+PG5zNjpjYW5vbmljYWxOYW1lPkxhdGluIEFtZXJpY2EgJmFtcDsgQ2FyaWJiZWFuPC9uczY6Y2Fub25pY2FsTmFtZT48L25zMjp0ZXJtPjxuczI6c2NvcmUgbnMyOmNvbmZpZGVuY2U9IjEwMCIgbnMyOnJlbGV2YW5jZT0iMTAwIi8+PC9uczI6dGFnPjwvbnMxMTp0YWdzPjxuczExOmV4dGVybmFsUmVmZXJlbmNlcz48bnMxOnJlZmVyZW5jZSBuczM6ZXh0ZXJuYWxTb3VyY2U9Ik1FVEhPREUiIG5zMzpleHRlcm5hbElkPSI4NDU5NGNmMi1lZDJjLTExZTUtOWZjYS1mYjBmOTQ2ZmQxZjAiLz48L25zMTE6ZXh0ZXJuYWxSZWZlcmVuY2VzPjwvbnMxMTpjb250ZW50UmVmPg=="
